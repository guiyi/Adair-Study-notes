- ### **RDB(Redis DataBase)**

在指定时间间隔内将内存中的数据集快照写入磁盘，也就是行话说的Snapshot快照，它恢复是是从快照文件直接读到内存中。

rdb保存的文件是dump.rdb  在生产环境会对该文件进行备份

1. save 的规则满足的情况下，会自动触发rdb规则
2. 执行flushall命令，也会触发我们的rdb规则！
3. 退出redis，也会产生rdb文件

如何恢复rdb文件！

1.  只需要将rdb文件放在我们redis启动目录即可，redis启动的时候会自动检查dump.rdb恢复其中的数据！
2. 查看需要存在的位置

```shell
192.168.0.182:6379> config get dir
1) "dir"
2) "/var/lib/redis"
```

**优点：**

**1. 适合大规模的数据恢复！**

**2.对数据的完整性要求不高！**

**缺点：**

**1.需要一定的时间间隔进程操作！如果redis意外宕机了，这个最后一次修改的数据就没有了！**

**2.fork进程的时候，会占用一定的内存空间**







- ### **AOF(Append Only File) 追加文件**

**将我们所有的命令都记录下来，history 恢复的时候，就把这个文件全部再执行一遍。**

appendfilename "appendonly.aof"

默认是不开启的，需要手动进行配置

 **appendonly yes** 

**优点：**

**1. 每一次修改都同步，文件的完整会更好！**

**2. 每秒同步一次，可能会丢失一秒的数据**

**3. 从不同步，效率最高的**

**缺点：**

**1.相对于数据文件来说，aof远远大于rdb，修复的速度也比rdb慢！**

**2. aof运行效率也比rdb慢，所以redis默认的配置就是rdb持久化！**